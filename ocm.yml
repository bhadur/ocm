 resources:
  repositories:
  - repository: ocm
    type: github
    endpoint: bhadur
    name: bhadur/ocm
    
 pool:
  name: 'Default'  

 variables:
    WORK_DIR: $(Pipeline.Workspace)/ocm
    BUILD_DIR: $(WORK_DIR)/build
    BUILD_TYPE: OCM
    OV_VERSION: openvino_2021.2.185
    TEST_FILE: test_list.txt
    TESTMODE: UTEST
    DEVICE: CPU
    
 steps:

   - script: |
      rm -rf $(WORK_DIR) ; mkdir $(WORK_DIR)
      rm -rf $(BUILD_DIR) ; mkdir $(BUILD_DIR)
      
   
   - checkout: self
     clean: true
     lfs: false
     path: ocm
     
   - task: Bash@3
     inputs:
      targetType: 'inline'
      script: |
       bash test.sh 
      $(WORK_DIR)/build
